{% extends "base.html" %}

{% block title %}Каталог товаров{% endblock %}

{% block content %}
<p>
  Добро пожаловать, <strong>{{ welcome_name or 'none' }}</strong> —
  вы в салоне: <strong>{{ salon_name }}</strong> (slug: {{ salon_slug }})
</p>

<h1 class="mb-4">Каталог товаров</h1>

<!-- Кладём JSON без парсинга линтерами/IDE -->
<script id="bootstrap-data" type="text/plain">
{{ {"initData": (init_data or ""), "userPayload": (user_payload or {})} | tojson }}
</script>

<script>
  (function () {
    const el = document.getElementById('bootstrap-data');
    let data = { initData: "", userPayload: {} };
    try { data = JSON.parse(el.textContent); } catch (e) { console.warn('Bad bootstrap JSON', e); }
    console.log('Telegram initData:', data.initData);
    console.log('Decoded user:', data.userPayload);
  })();
</script>

{% include "catalog_content.html" %}
{% endblock %}
